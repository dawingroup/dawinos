# Architecture Diagrams

Visual diagrams for the Dawin Design-to-Production Platform.

---

## 1. System Context Diagram

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚           EXTERNAL USERS            â”‚
                              â”‚  ğŸ‘¤ Designers   ğŸ‘¤ Engineers        â”‚
                              â”‚  ğŸ‘¤ Production  ğŸ‘¤ Management       â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚ HTTPS
                                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 DAWIN DESIGN-TO-PRODUCTION PLATFORM                  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    REACT FRONTEND (SPA)                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚ Design   â”‚  â”‚ Cutlist  â”‚  â”‚Procure-  â”‚  â”‚Productionâ”‚       â”‚ â”‚
â”‚  â”‚  â”‚ Manager  â”‚  â”‚Processor â”‚  â”‚  ment    â”‚  â”‚ Tracker  â”‚       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  SHARED: Auth â”‚ UI â”‚ Hooks â”‚ AI Services â”‚ APIs         â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                     â”‚
â”‚                                â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    FIREBASE BACKEND                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚Firestore â”‚  â”‚   Auth   â”‚  â”‚ Storage  â”‚  â”‚Functions â”‚       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                         â–¼                         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   NOTION   â”‚           â”‚   GOOGLE   â”‚           â”‚   KATANA   â”‚
  â”‚ â€¢ Projects â”‚           â”‚   DRIVE    â”‚           â”‚    MRP     â”‚
  â”‚ â€¢ Clients  â”‚           â”‚ â€¢ Files    â”‚           â”‚ â€¢ Products â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Module Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MODULE DATA FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   DESIGN MANAGER     â”‚
                    â”‚                      â”‚
                    â”‚  DesignItem {        â”‚
                    â”‚    parameters,       â”‚
                    â”‚    ragStatus,        â”‚
                    â”‚    stage             â”‚
                    â”‚  }                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ 1. Production Release
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  CUTLIST PROCESSOR   â”‚
                    â”‚                      â”‚
                    â”‚  Panel[] {           â”‚â—„â”€â”€â”€ 2. Import panels
                    â”‚    material,         â”‚
                    â”‚    dimensions        â”‚
                    â”‚  }                   â”‚
                    â”‚                      â”‚
                    â”‚  OptimizedCutlist {  â”‚â”€â”€â”€â–º 3. Export BOM
                    â”‚    layouts[],        â”‚
                    â”‚    bom[]             â”‚
                    â”‚  }                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ 4. Material Requirements
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    PROCUREMENT       â”‚
                    â”‚                      â”‚
                    â”‚  MaterialOrder {     â”‚â”€â”€â”€â–º 5. Sync to Katana
                    â”‚    items[],          â”‚
                    â”‚    supplier          â”‚
                    â”‚  }                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ 6. Materials Ready
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  PRODUCTION TRACKER  â”‚
                    â”‚                      â”‚
                    â”‚  WorkOrder {         â”‚â—„â”€â”€â”€ 7. Link to source
                    â”‚    designItemId,     â”‚
                    â”‚    cutlistId         â”‚
                    â”‚  }                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. AI Services Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AI SERVICES LAYER                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   CLAUDE    â”‚      â”‚   VISION    â”‚      â”‚   CUSTOM    â”‚
   â”‚     API     â”‚      â”‚    MODELS   â”‚      â”‚     ML      â”‚
   â”‚             â”‚      â”‚             â”‚      â”‚   MODELS    â”‚
   â”‚ â€¢ Text Gen  â”‚      â”‚ â€¢ Drawing   â”‚      â”‚ â€¢ Cost Est  â”‚
   â”‚ â€¢ Analysis  â”‚      â”‚   Analysis  â”‚      â”‚ â€¢ Time Est  â”‚
   â”‚ â€¢ Q&A       â”‚      â”‚ â€¢ Extract   â”‚      â”‚ â€¢ Predict   â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                  AI SERVICE ORCHESTRATOR                       â”‚
   â”‚                                                                â”‚
   â”‚  â€¢ Request routing to appropriate model                       â”‚
   â”‚  â€¢ Context management and prompt engineering                  â”‚
   â”‚  â€¢ Response parsing and validation                            â”‚
   â”‚  â€¢ Caching and rate limiting                                  â”‚
   â”‚  â€¢ Error handling and fallbacks                               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                     â–¼                     â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  DESIGN    â”‚       â”‚  CUTLIST   â”‚       â”‚ PRODUCTION â”‚
   â”‚  MANAGER   â”‚       â”‚ PROCESSOR  â”‚       â”‚  TRACKER   â”‚
   â”‚    AI      â”‚       â”‚    AI      â”‚       â”‚    AI      â”‚
   â”‚            â”‚       â”‚            â”‚       â”‚            â”‚
   â”‚ â€¢ Brief    â”‚       â”‚ â€¢ Material â”‚       â”‚ â€¢ Schedule â”‚
   â”‚   Parser   â”‚       â”‚   Mapper   â”‚       â”‚   Optimize â”‚
   â”‚ â€¢ DfM      â”‚       â”‚ â€¢ Optimize â”‚       â”‚ â€¢ Quality  â”‚
   â”‚   Analyzer â”‚       â”‚   Advisor  â”‚       â”‚   Predict  â”‚
   â”‚ â€¢ Cost Est â”‚       â”‚ â€¢ Anomaly  â”‚       â”‚ â€¢ Reports  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. AI Integration Workflow

```
DESIGN PHASE                 PLANNING PHASE              PRODUCTION PHASE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ Brief   â”‚              â”‚  ğŸ“Š Cutlist â”‚             â”‚  ğŸ­ Shop    â”‚
â”‚   Received  â”‚              â”‚   Created   â”‚             â”‚   Floor     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚                           â”‚
       â–¼                            â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– AI BRIEF  â”‚             â”‚ ğŸ¤– AI MAT.   â”‚            â”‚ ğŸ¤– AI SCHED. â”‚
â”‚   PARSER     â”‚             â”‚   MAPPER     â”‚            â”‚  OPTIMIZER   â”‚
â”‚              â”‚             â”‚              â”‚            â”‚              â”‚
â”‚ Extract:     â”‚             â”‚ Auto-map:    â”‚            â”‚ Optimize:    â”‚
â”‚ â€¢ Dimensions â”‚             â”‚ â€¢ Materials  â”‚            â”‚ â€¢ Sequence   â”‚
â”‚ â€¢ Materials  â”‚             â”‚ â€¢ Suggest    â”‚            â”‚ â€¢ Resources  â”‚
â”‚ â€¢ Hardware   â”‚             â”‚   alternates â”‚            â”‚ â€¢ Timing     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚                           â”‚
       â–¼                            â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– AI DfM    â”‚             â”‚ ğŸ¤– AI OPTIM. â”‚            â”‚ ğŸ¤– AI QUAL.  â”‚
â”‚  ANALYZER    â”‚             â”‚  ADVISOR     â”‚            â”‚  PREDICTOR   â”‚
â”‚              â”‚             â”‚              â”‚            â”‚              â”‚
â”‚ Check:       â”‚             â”‚ Suggest:     â”‚            â”‚ Predict:     â”‚
â”‚ â€¢ Structure  â”‚             â”‚ â€¢ Settings   â”‚            â”‚ â€¢ Defects    â”‚
â”‚ â€¢ Materials  â”‚             â”‚ â€¢ Rotations  â”‚            â”‚ â€¢ Delays     â”‚
â”‚ â€¢ Joinery    â”‚             â”‚ â€¢ Groupings  â”‚            â”‚ â€¢ Rework     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚                           â”‚
       â–¼                            â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– AI COST   â”‚             â”‚ ğŸ¤– AI ANOMLY â”‚            â”‚ ğŸ¤– AI REPORT â”‚
â”‚  ESTIMATOR   â”‚             â”‚  DETECTOR    â”‚            â”‚  GENERATOR   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User      â”‚         â”‚   Customer   â”‚         â”‚   Supplier   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚         â”‚ id           â”‚         â”‚ id           â”‚
â”‚ email        â”‚         â”‚ name         â”‚         â”‚ name         â”‚
â”‚ displayName  â”‚         â”‚ notionPageId â”‚         â”‚ materials[]  â”‚
â”‚ role         â”‚         â”‚ status       â”‚         â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                         â”‚                        â”‚
       â”‚ creates                 â”‚ owns                   â”‚ supplies
       â–¼                         â–¼                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚DesignProject â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  1:N    â”‚              â”‚                â”‚
â”‚ id           â”‚         â”‚              â”‚                â”‚
â”‚ code         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                â”‚
â”‚ customerId   â”‚                        â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚                â”‚
       â”‚ contains                       â”‚                â”‚
       â–¼                                â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚                â”‚
â”‚  DesignItem  â”‚                        â”‚                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚                â”‚
â”‚ itemCode     â”‚                        â”‚                â”‚
â”‚ category     â”‚                        â”‚                â”‚
â”‚ currentStage â”‚                        â”‚                â”‚
â”‚ ragStatus    â”‚                        â”‚                â”‚
â”‚ parameters   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ crossRefs    â”‚â”€â”€â”€â”                    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                    â”‚
       â”‚ releases  â”‚                    â”‚
       â–¼           â–¼                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ WorkInstance â”‚â—„â”€â”€â”¤              â”‚     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚              â”‚     â”‚
â”‚ panels[]     â”‚   â”‚              â”‚     â”‚
â”‚ optimization â”‚   â”‚              â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚     â”‚
       â”‚ generates â”‚              â”‚     â”‚
       â–¼           â”‚              â”‚     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚     â”‚
â”‚  BillOfMat   â”‚â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚              â”‚
â”‚ materials[]  â”‚   â”‚              â”‚
â”‚ quantities[] â”‚   â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
       â”‚ feeds     â”‚              â”‚
       â–¼           â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PurchaseOrder â”‚         â”‚  WorkOrder   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ supplierId   â”‚         â”‚ designItemId â”‚
â”‚ items[]      â”‚         â”‚ station      â”‚
â”‚ status       â”‚         â”‚ status       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Stage-Gate Workflow (Design Manager)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DESIGN STAGE-GATE WORKFLOW                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  CONCEPT       PRELIMINARY     TECHNICAL      PRE-PROD      PRODUCTION
    ğŸ’¡              ğŸ“             âš™ï¸            ğŸ”§            âœ…
    â”‚               â”‚              â”‚             â”‚             â”‚
    â–¼               â–¼              â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Initial â”‚    â”‚ Design  â”‚    â”‚Technicalâ”‚   â”‚   Pre-  â”‚   â”‚  Ready  â”‚
â”‚  Idea   â”‚    â”‚ Develop â”‚    â”‚ Detail  â”‚   â”‚  Prod   â”‚   â”‚   for   â”‚
â”‚         â”‚    â”‚         â”‚    â”‚         â”‚   â”‚ Review  â”‚   â”‚   Mfg   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚             â”‚
     â–¼              â–¼              â–¼             â–¼
â•”â•â•â•â•â•â•â•â•â•â•—    â•”â•â•â•â•â•â•â•â•â•â•—    â•”â•â•â•â•â•â•â•â•â•â•—   â•”â•â•â•â•â•â•â•â•â•â•—
â•‘  GATE   â•‘    â•‘  GATE   â•‘    â•‘  GATE   â•‘   â•‘  GATE   â•‘
â•‘   1     â•‘    â•‘   2     â•‘    â•‘   3     â•‘   â•‘   4     â•‘
â• â•â•â•â•â•â•â•â•â•â•£    â• â•â•â•â•â•â•â•â•â•â•£    â• â•â•â•â•â•â•â•â•â•â•£   â• â•â•â•â•â•â•â•â•â•â•£
â•‘Must:    â•‘    â•‘Must:    â•‘    â•‘Must:    â•‘   â•‘Must:    â•‘
â•‘â€¢ Dims   â•‘    â•‘â€¢ 3D     â•‘    â•‘â€¢ Dwgs   â•‘   â•‘â€¢ ALL    â•‘
â•‘         â•‘    â•‘â€¢ Specs  â•‘    â•‘â€¢ Joineryâ•‘   â•‘  GREEN  â•‘
â•‘Should:  â•‘    â•‘â€¢ Client â•‘    â•‘â€¢ Mfg    â•‘   â•‘         â•‘
â•‘â€¢ Mtl    â•‘    â•‘  OK     â•‘    â•‘  Review â•‘   â•‘â€¢ 95%+   â•‘
â•šâ•â•â•â•â•¤â•â•â•â•â•    â•šâ•â•â•â•â•¤â•â•â•â•â•    â•šâ•â•â•â•â•¤â•â•â•â•â•   â•šâ•â•â•â•â•¤â•â•â•â•â•
     â”‚              â”‚              â”‚             â”‚
     â”‚    40%+      â”‚    60%+      â”‚    80%+     â”‚    95%+
     â”‚  Readiness   â”‚  Readiness   â”‚  Readiness  â”‚  Readiness
     â”‚              â”‚              â”‚             â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


RAG STATUS TRACKING (19 Aspects)
================================

Design Completeness (9)     Manufacturing Ready (6)    Quality Gates (4)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”´ Overall Dimensions       ğŸ”´ Material Availability   ğŸ”´ Internal Review
ğŸ”´ 3D Model                 ğŸ”´ Hardware Availability   ğŸ”´ Mfg Review
ğŸ”´ Production Drawings      ğŸ”´ Tooling Readiness       ğŸ”´ Client Approval
ğŸ”´ Material Specs           ğŸ”´ Process Documentation   ğŸ”´ Prototype Valid
ğŸ”´ Hardware Specs           ğŸ”´ Quality Criteria
ğŸ”´ Finish Specs             ğŸ”´ Cost Validation
ğŸ”´ Joinery Details
ğŸ”´ Tolerances
ğŸ”´ Assembly Instructions

Legend: ğŸ”´ Red (Not Started)  ğŸŸ¡ Amber (In Progress)  ğŸŸ¢ Green (Complete)
```

---

## 7. Migration Path Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LEGACY TO MODULAR MIGRATION                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 1: Foundation (âœ…)    PHASE 2: Extraction (ğŸ”„)   PHASE 3: Integration (ğŸ“‹)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Folder       â”‚     â”‚ Move Legacy Files   â”‚    â”‚ Wire Up Events      â”‚
â”‚ Structure           â”‚     â”‚                     â”‚    â”‚                     â”‚
â”‚                     â”‚     â”‚ App.jsx â†’ modules/  â”‚    â”‚ Firestore Triggers  â”‚
â”‚ src/modules/        â”‚     â”‚ components/ â†’       â”‚    â”‚ ModuleBridge        â”‚
â”‚ src/shared/         â”‚     â”‚   module/comp/      â”‚    â”‚ Cross-refs          â”‚
â”‚ src/app/            â”‚     â”‚ services/ â†’ shared/ â”‚    â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                           â”‚                          â”‚
          â–¼                           â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Set Up Routing      â”‚     â”‚ Fix Imports         â”‚    â”‚ Test Integration    â”‚
â”‚                     â”‚     â”‚                     â”‚    â”‚                     â”‚
â”‚ /cutlist/*          â”‚     â”‚ Update paths        â”‚    â”‚ End-to-end flows    â”‚
â”‚ /design/*           â”‚     â”‚ Use @/ aliases      â”‚    â”‚ Cross-module nav    â”‚
â”‚ /procurement/*      â”‚     â”‚ Barrel exports      â”‚    â”‚ Data sync           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


FILE MIGRATION MAP
==================

src/App.jsx (100KB)
â”œâ”€â”€ DataInputPanel      â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/components/
â”œâ”€â”€ CuttingOptimizer    â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/components/
â”œâ”€â”€ OutputGenerators    â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/components/
â””â”€â”€ State management    â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/context/

src/components/
â”œâ”€â”€ FileUpload.jsx      â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/components/
â”œâ”€â”€ CuttingDiagram.jsx  â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/components/
â”œâ”€â”€ AuthButton.jsx      â”€â”€â”€â”€â”€â”€â–º  shared/components/
â””â”€â”€ CustomerProject...  â”€â”€â”€â”€â”€â”€â–º  shared/components/

src/services/
â”œâ”€â”€ driveService.js     â”€â”€â”€â”€â”€â”€â–º  shared/services/external/
â”œâ”€â”€ configService.js    â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/services/
â””â”€â”€ pdfExportService.js â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/services/

src/contexts/
â”œâ”€â”€ AuthContext.jsx     â”€â”€â”€â”€â”€â”€â–º  shared/contexts/
â””â”€â”€ ConfigContext.jsx   â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/context/

src/utils/
â”œâ”€â”€ csvParser.js        â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/utils/
â”œâ”€â”€ optimizationEngine  â”€â”€â”€â”€â”€â”€â–º  modules/cutlist-processor/utils/
â””â”€â”€ materialUtils.js    â”€â”€â”€â”€â”€â”€â–º  shared/utils/
```

---

## 8. External Integration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL INTEGRATIONS FLOW                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         FRONTEND
                            â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                      â”‚                      â”‚
     â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOTION  â”‚          â”‚   GOOGLE    â”‚         â”‚ KATANA  â”‚
â”‚ Service â”‚          â”‚   DRIVE     â”‚         â”‚ Service â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                      â”‚                      â”‚
     â”‚ /api/notion/*        â”‚ Direct OAuth        â”‚ /api/katana/*
     â”‚                      â”‚ + /api/drive/*      â”‚
     â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FIREBASE CLOUD FUNCTIONS                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Notion API   â”‚  â”‚ Drive API    â”‚  â”‚ Katana API   â”‚          â”‚
â”‚  â”‚ Proxy        â”‚  â”‚ Proxy        â”‚  â”‚ Proxy        â”‚          â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚          â”‚
â”‚  â”‚ â€¢ Customers  â”‚  â”‚ â€¢ Upload     â”‚  â”‚ â€¢ Products   â”‚          â”‚
â”‚  â”‚ â€¢ Projects   â”‚  â”‚ â€¢ Download   â”‚  â”‚ â€¢ BOMs       â”‚          â”‚
â”‚  â”‚ â€¢ Activities â”‚  â”‚ â€¢ Folders    â”‚  â”‚ â€¢ Orders     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                 â”‚                 â”‚                   â”‚
â”‚    API Keys          OAuth Token       API Token                â”‚
â”‚    (Secret)          (User)            (Secret)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  NOTION  â”‚      â”‚  GOOGLE  â”‚      â”‚  KATANA  â”‚
    â”‚   API    â”‚      â”‚   APIs   â”‚      â”‚   API    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Firestore Data Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FIRESTORE COLLECTIONS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

/users/{userId}
â”œâ”€â”€ email: string
â”œâ”€â”€ displayName: string
â”œâ”€â”€ role: 'admin' | 'designer' | 'engineer' | 'viewer'
â””â”€â”€ createdAt: timestamp

/designProjects/{projectId}
â”œâ”€â”€ code: string (DF-YYYY-XXX)
â”œâ”€â”€ name: string
â”œâ”€â”€ customerId: string
â”œâ”€â”€ status: 'active' | 'completed'
â”œâ”€â”€ overallReadiness: number
â”‚
â””â”€â”€ /designItems/{itemId}  â—„â”€â”€ Subcollection
    â”œâ”€â”€ itemCode: string
    â”œâ”€â”€ category: DesignCategory
    â”œâ”€â”€ currentStage: DesignStage
    â”œâ”€â”€ ragStatus: RAGStatus
    â”œâ”€â”€ parameters: DesignParameters
    â””â”€â”€ crossRefs: CrossModuleRefs

/workInstances/{instanceId}
â”œâ”€â”€ name: string
â”œâ”€â”€ projectId?: string  â†â”€â”€ Links to designProject
â”œâ”€â”€ panels: Panel[]
â”œâ”€â”€ optimizationResult: {}
â””â”€â”€ crossRefs: CrossModuleRefs

/materialMappings/{id}
â”œâ”€â”€ genericName: string
â”œâ”€â”€ supplierName: string
â””â”€â”€ confidence: number

/stockMaterials/{id}
â”œâ”€â”€ name: string
â”œâ”€â”€ stockLength: number
â”œâ”€â”€ stockWidth: number
â””â”€â”€ thickness: number

/aiAnalyses/{id}
â”œâ”€â”€ type: 'dfm' | 'brief' | 'cost'
â”œâ”€â”€ sourceId: string
â”œâ”€â”€ input: {}
â”œâ”€â”€ output: {}
â””â”€â”€ completedAt: timestamp
```
